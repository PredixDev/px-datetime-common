sudo: required
dist: trusty
language: node_js
node_js:
- stable
branches:
  except:
  - gh-pages
addons:
  firefox: latest
  apt:
    sources:
    - google-chrome
    packages:
    - google-chrome-stable
before_script:
- npm install web-component-tester
- npm install bower
- export PATH=$PWD/node_modules/.bin:$PATH
- bower install
script:
- xvfb-run wct --skip-plugin sauce
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then wct --plugin sauce --skip-plugin
  local; fi
after_success:
- if [ "${TRAVIS_PULL_REQUEST}" = "false" ]; then openssl aes-256-cbc -k "$DEPLOYSECRET"
  -in deploy.enc -out deploy_key -d; fi
- cd $TRAVIS_BUILD_DIR/scripts
- chmod 755 ghp.sh
- "./ghp.sh"
env:
  global:
  - secure: QWTu+h4OuriLIYCLeQjuvf3UPcLSF7YYE4eG+y5tJ6ZH+jsWRMlZafjojDsi2y6l5xrhW+aqsel7nUtr8vLg7DutCUvqcDG34QetIxzCHGRcflZWQxZaDTjygIeXQGCzCSm855jOMdPQUW8zJWlb69OfVc0l3DqTI8WkacIbF+wCMPal0xehBrbN4i0rWnxX29iYNN2PytCwMZQSdjXexMwToTHKkVa/BfDZ2xyJ2KFg9StNh2QKXNZihEWxPMGwblSrgpBLPcqrpz4vDvc2f2SlhQnBPz7SGdiMBRCsMPmV78M2vQxKCJrBZO7irG0C7I9TJbCiQsahr6CLsk0U6k+q9tFk6ksa8kjd647BrpGVNHJpbEckBco0MiFzsvrY2jsflDQTqYohVp/StcE6TLnT45M8N/mefwCLv6ScciyafbV7qQfzieJxPiP4sq2JZK1C432lhrk08Cm66WgDrw0aW1Ic2SPyazO19QTepe4UtAuh/SNsl77Xw8KllxVTz5EncwOmVEzLv7CQ6dVgJJ3YctIz2Oj024Gx7r/aFMvcTu7Kh3maeEDk7Wuab63RrrdLTnKV/sLLJEMBjfM/pUEKsLuwcfiH8JWGYDXXcm4/fEQwGIAGdqvAk5L9M1i623kNfZHLE/A0l7jPeuS//DQct4XNeyQ09IQk9Ityhp4=
  - secure: PK445/W9Xl/5UqvfTtHxqDP8XpxNNIqVt4+9nxGuvK1VfAB5D3BVuNT+muRVAu5lB99WrKzQjUTdUrCTEUZ5r91E/H0FzB3rkcRpuXma11KvnUZwd4qHJaXZ78oLq95508LSgsbOwDO23eJ15wPp36EfgsWN8vrBhGhVS1fj2vwJfJyUfc30EGxDooKNNmWnayb3N+7/UmSD+sZNAQ9I4PUinuhpgUeBgzCs5efdmdEIeWOgqaxaLKbOMEqEGo5pwnIDu/4nAzWZCz7X3M+vJv0ZidbqxePSAg0JEV/IQpQ4ZMKNOli8IUUA9a9En/0pD8adias049I7l/xFO92hxdDO7OXiSs9ZqRZyl3oRBC375GxC/kcJg3H3FHrxbbDqeUsRPNL2s3MbxVsg8T7vmqD+EiU37mgtuxfryQBoIRsKxALAhKUI+2XEpq/wFgIPz/t9ROe+102QsIYh45wVBm6h/bCaLAmhi2pmv2WEZjl+oYYIjbCr3R8OYl5x5quFAB4qgeKNDhhlVvYoE5aQHKc5P+cHsCxPOZ5+CQ4rQCTgdjo/fyy6PK1lpkxo8H51oYQT2VwgvkuNUoygl/mDOguTMA8YAXbn4TsvDyV1vEDkGYHe5CB9CZzpa93zB4YT5SLzNzl1tu1LgxyeMvNDxbKze9rWLPAdTiOSqKPnRBw=
