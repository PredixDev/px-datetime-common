<link rel="import" href="px-datetime-shared-behavior.html" />

<script>

/**
  ```pxDatetimeBehavior```

  This behavior is for all ```px-{datetime}-{picker}``` components.

  Dependencies: momentjs

  @polymerBehavior pxDatetimeBehavior
*/

var pxDatetimeBehavior = [{

  properties: {
    /**
     * Moment value with the date or time to display.  Will be parsed according to the moment format. (See momentFormat property.)
     * Defaults to now.
     *
     * @private
     */
    momentObj: {
      type: Object,
      notify: true
    }
  },

  observers: ['_localeChanged(language)',
              '_timeZoneChanged(timeZone)'],

  /**
   * Make sure the moment obj pick up the possibly new moment locale
   */
  _localeChanged: function() {
    if(this.language !== undefined && this.momentObj) {
      this.set('momentObj', this.momentObj.locale(Px.moment.locale()));
    }
  },
  /**
   * Makes sure the moment object reflects the right timezone.
   */
  _timeZoneChanged: function() {
    if(this.timeZone !== undefined && this.momentObj) {
      var newMom = this.momentObj.clone().tz(this.timeZone);
      this.set('momentObj', newMom);
    }
  }
}, pxDatetimeSharedBehavior];

</script>
